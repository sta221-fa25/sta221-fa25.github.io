{
  "hash": "c231c5481894a428469a72450a496124",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Interaction effects\"\ndate: \"October 1, 2025\"\nformat: revealjs\n---\n\n\n\n## Packages in these notes\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(palmerpenguins)\nlibrary(knitr)\nlibrary(kableExtra)\nlibrary(tidymodels)\n```\n:::\n\n\n\n\n## Interaction terms\n\n-   Sometimes the relationship between a predictor variable and the response depends on the value of another predictor variable.\n-   This is an **interaction effect**.\n-   To account for this, we can include **interaction terms** in the model.\n\n## Example: penguins\n\nThe relationship between penguin bill length and body mass depends on the penguin's island.\n\n::: panel-tabset\n\n## plot\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](lab-interactions_files/figure-revealjs/unnamed-chunk-2-1.png){width=1152}\n:::\n:::\n\n\n\n## code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins |>\n  ggplot(aes(x = bill_length_mm, \n             y = body_mass_g, color = island)) +\n  geom_point() +\n  theme_bw() +\n  geom_smooth(method = 'lm', se = F) +\n  labs(x = \"Bill length (mm)\", \n       y = \"Body mass (g)\", \n       title = \"Island interaction effect\")\n```\n:::\n\n\n\n## discuss\n\nThe lines are not parallel indicating there is a potential **interaction effect**. The slope for bill length differs based on the penguin's island.\n\n:::\n\n\n## Interaction term in model {.smaller}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguin_fit <- lm(body_mass_g ~ bill_length_mm * island,\n      data = penguins)\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> term </th>\n   <th style=\"text-align:right;\"> estimate </th>\n   <th style=\"text-align:right;\"> std.error </th>\n   <th style=\"text-align:right;\"> statistic </th>\n   <th style=\"text-align:right;\"> p.value </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> (Intercept) </td>\n   <td style=\"text-align:right;\"> -1726.02 </td>\n   <td style=\"text-align:right;\"> 292.08 </td>\n   <td style=\"text-align:right;\"> -5.91 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> bill_length_mm </td>\n   <td style=\"text-align:right;\"> 142.34 </td>\n   <td style=\"text-align:right;\"> 6.42 </td>\n   <td style=\"text-align:right;\"> 22.18 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> islandDream </td>\n   <td style=\"text-align:right;\"> 4478.69 </td>\n   <td style=\"text-align:right;\"> 395.31 </td>\n   <td style=\"text-align:right;\"> 11.33 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> islandTorgersen </td>\n   <td style=\"text-align:right;\"> 2870.56 </td>\n   <td style=\"text-align:right;\"> 777.69 </td>\n   <td style=\"text-align:right;\"> 3.69 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;background-color: rgba(220, 229, 178, 255) !important;\"> bill_length_mm:islandDream </td>\n   <td style=\"text-align:right;background-color: rgba(220, 229, 178, 255) !important;\"> -120.60 </td>\n   <td style=\"text-align:right;background-color: rgba(220, 229, 178, 255) !important;\"> 8.77 </td>\n   <td style=\"text-align:right;background-color: rgba(220, 229, 178, 255) !important;\"> -13.75 </td>\n   <td style=\"text-align:right;background-color: rgba(220, 229, 178, 255) !important;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;background-color: rgba(220, 229, 178, 255) !important;\"> bill_length_mm:islandTorgersen </td>\n   <td style=\"text-align:right;background-color: rgba(220, 229, 178, 255) !important;\"> -76.57 </td>\n   <td style=\"text-align:right;background-color: rgba(220, 229, 178, 255) !important;\"> 19.53 </td>\n   <td style=\"text-align:right;background-color: rgba(220, 229, 178, 255) !important;\"> -3.92 </td>\n   <td style=\"text-align:right;background-color: rgba(220, 229, 178, 255) !important;\"> 0 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n## Interaction term in model {.midi}\n\n:::panel-tabset\n## Exercise\n::: question\n- Write the regression equation for penguins from island `Torgersen`\n\n- Write the regression equation for penguins from island `Dream`\n\n- Write the regression equation for penguins from island `Biscoe`\n:::\n## Solution\n\nPenguins equations for each island:\n\n$$\n\\begin{aligned}\n\\hat{y}_{\\text{torgersen}} &= (-1726.02 + 2870.56)\t+ (142.34 - 76.57)x_1\\\\\n&= 1144.54 + 65.77x_1\\\\\n\\hat{y}_{\\text{dream}} &= (-1726.02 + 4478.69\t)\t+ (142.34 - 120.60)x_1\\\\\n&= 2752.67 + 21.74x_1\\\\\n\\hat{y}_{\\text{biscoe}} &= -1726.02\t+ 142.34 x_1\n\\end{aligned}\n$$\n\nwhere $\\hat{y}$ is the predicted body mass for a given bill length $x_1$.\n:::\n\n## Interpreting interaction terms\n\nWhat the interaction means: \n\n- The effect of bill length on body mass differs by -76.5 when the penguin comes from island Torgersen instead of Biscoe. \n\n- The effect of bill length on body mass differs by -120 when the penguin comes from island Dream instead of Biscoe. \n\n",
    "supporting": [
      "lab-interactions_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}